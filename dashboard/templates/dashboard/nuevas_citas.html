{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendar Nueva Cita | CareConnect</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'dashboard/css/nuevas_citas.css' %}">
</head>
<body>

    <div class="booking-card">
        <div class="form-header">
            <h2><i class="fas fa-calendar-plus"></i> Nueva Cita</h2>
            <p>Complete los datos para agendar su visita m√©dica.</p>
        </div>

        <form method="POST" action="{% url 'nueva_cita' %}" id="citaForm">
            {% csrf_token %}

            <div class="form-group">
                <label for="{{ form.doctor.id_for_label }}" class="form-label">Especialista</label>
                {{ form.doctor }}
                {% if form.doctor.errors %}
                    <ul class="error-list">{{ form.doctor.errors }}</ul>
                {% endif %}
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label for="{{ form.fecha.id_for_label }}" class="form-label">Fecha</label>
                    {{ form.fecha }}
                    {% if form.fecha.errors %}
                        <ul class="error-list">{{ form.fecha.errors }}</ul>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.hora.id_for_label }}" class="form-label">Hora</label>
                    {{ form.hora }}
                    {% if form.hora.errors %}
                        <ul class="error-list">{{ form.hora.errors }}</ul>
                    {% endif %}
                </div>
            </div>

            <div class="form-group">
                <label for="{{ form.motivo.id_for_label }}" class="form-label">Motivo de la consulta</label>
                {{ form.motivo }}
                {% if form.motivo.errors %}
                    <ul class="error-list">{{ form.motivo.errors }}</ul>
                {% endif %}
            </div>

            <div class="btn-actions">
                <a href="{% url 'dashboard' %}" class="btn-cancel">Cancelar</a>
                
                <button type="submit" class="btn-submit">
                    Confirmar Cita <i class="fas fa-check"></i>
                </button>
            </div>
        </form>
    </div>

    <script>
        
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.querySelector('input[type="date"]');
            if (dateInput) {
                const today = new Date().toISOString().split('T')[0];
                dateInput.setAttribute('min', today);
            }
        });
    </script>

</body>
</html>